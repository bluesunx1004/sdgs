# pages/09_09_employment_rate.py
"""
ì²­ë…„ ê³ ìš© ë™í–¥ ë¶„ì„ â€“ SDGâ€¯8 (ì–‘ì§ˆì˜ ì¼ìë¦¬ì™€ ê²½ì œ ì„±ì¥)
ì´ í˜ì´ì§€ëŠ” employmentrate.csv íŒŒì¼(2010â€‘2024)ì„ í™œìš©í•´ ìš°ë¦¬ë‚˜ë¼ ì²­ë…„ ê³ ìš© ì§€í‘œë¥¼ ì‹œê°í™”í•˜ê³ ,
í•™ìƒ í† ë¡ â€§êµìœ¡ì  í•¨ì˜â€§í™•ì¥ í™œë™ì„ ì œì‹œí•©ë‹ˆë‹¤.
"""

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë¼ì´ë¸ŒëŸ¬ë¦¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import streamlit as st
import pandas as pd
import plotly.express as px
import os
import plotly.graph_objects as go


# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ í˜ì´ì§€ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.set_page_config(page_title="ğŸ‡°ğŸ‡· ì²­ë…„ ê³ ìš© ë™í–¥ ë¶„ì„", layout="wide")
st.title("ğŸ‘©â€ğŸ’¼ ìš°ë¦¬ë‚˜ë¼ ì²­ë…„ ê³ ìš© ë™í–¥ ë¶„ì„ (SDGâ€¯8)")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
def read_csv(name: str) -> pd.DataFrame:
    path = os.path.join(os.path.dirname(__file__), "..", name)
    if os.path.exists(path):
        return pd.read_csv(path, encoding="utf-8-sig")
    upl = st.file_uploader(f"â¬†ï¸ {name} ì—…ë¡œë“œ", type="csv", key=name)
    if upl is not None:
        return pd.read_csv(upl)
    st.stop()

data = read_csv("employmentrate.csv")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë°ì´í„° ì „ì²˜ë¦¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
data = data.set_index("Unnamed: 0").T
data.index.name = "ì—°ë„"
data = data.applymap(lambda x: float(str(x).replace(",", "")))
data["ê³ ìš©ë¥ (%)"] = data["ì·¨ì—…ì"] / data["ê²½ì œí™œë™ì¸êµ¬"] * 100
data["ì°¸ì—¬ìœ¨(%)"] = data["ê²½ì œí™œë™ì¸êµ¬"] / data["ìƒì‚°ê°€ëŠ¥ì¸êµ¬"] * 100
data = data.reset_index()
data["ì—°ë„"] = data["ì—°ë„"].astype(int)

st.markdown("### ğŸ“Š ê³ ìš©ë¥ ê³¼ ì‹¤ì—…ë¥  ë¹„êµ ì‹œê°í™”")

fig_dual = go.Figure()

# ë§‰ëŒ€ê·¸ë˜í”„: ê³ ìš©ë¥ 
fig_dual.add_trace(go.Bar(
    x=data["ì—°ë„"], y=data["ê³ ìš©ë¥ (%)"],
    name="ê³ ìš©ë¥ (%)", marker_color="deepskyblue", yaxis="y"
))

# ì„ ê·¸ë˜í”„: ì‹¤ì—…ë¥ 
fig_dual.add_trace(go.Scatter(
    x=data["ì—°ë„"], y=data["ì‹¤ì—…ë¥ "],
    name="ì‹¤ì—…ë¥ ", mode="lines+markers", line=dict(color="orange"), yaxis="y2"
))

# ë ˆì´ì•„ì›ƒ ì„¤ì •
fig_dual.update_layout(
    title="ì²­ë…„ ê³ ìš©ë™í–¥ (ê³ ìš©ë¥  ë° ì‹¤ì—…ë¥ )",
    xaxis=dict(title="ì—°ë„"),
    yaxis=dict(title="ê³ ìš©ë¥ (%)", range=[30, 50], side="left"),
    yaxis2=dict(title="ì‹¤ì—…ë¥ (%)", overlaying="y", side="right", range=[0, 14]),
    legend=dict(x=0.01, y=0.99),
    bargap=0.2,
    width=900,
    height=500
)

st.plotly_chart(fig_dual, use_container_width=True)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë°ì´í„° ë¯¸ë¦¬ë³´ê¸° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
with st.expander("ğŸ” ì›ë³¸ ë°ì´í„° ë³´ê¸°"):
    st.dataframe(data)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SDG ì—°ê³„ ë° ìˆ˜ì—… ìš”ì†Œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.markdown("### ğŸ’¬ í•™ìƒ í† ë¡  ì§ˆë¬¸")
st.markdown("""
1. **ê³ ìš©ë¥ **ì´ë‚˜ **ì‹¤ì—…ë¥ ** ì¤‘ ì–´ë–¤ ì§€í‘œê°€ ì‚¬íšŒ ë³€í™”ë¥¼ ë” ì˜ ë³´ì—¬ì¤€ë‹¤ê³  ìƒê°í•˜ë‚˜ìš”? ê·¸ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?
2. ê³ ìš© ì§€í‘œê°€ **ëšœë ·í•œ ë³€í™” ì—†ì´ ìœ ì§€**ë˜ëŠ” ê²ƒì€ ê¸ì •ì ì¸ê°€ìš”, ë¶€ì •ì ì¸ê°€ìš”?
3. SDGs **ëª©í‘œâ€¯8**ì˜ 'ì–‘ì§ˆì˜ ì¼ìë¦¬'ëŠ” ë‹¨ìˆœí•œ ê³ ìš©ë¥  ì™¸ì— ì–´ë–¤ ìš”ì†Œë“¤ì´ í¬í•¨ë˜ì–´ì•¼ í• ê¹Œìš”?
""")

st.markdown("### ğŸ“š êµìœ¡ì  í•¨ì˜")
st.markdown("""
- **ë³µí•© ì§€í‘œ ë¹„êµ ëŠ¥ë ¥**: ë‹¤ì–‘í•œ ê³ ìš© ì§€í‘œì˜ ìƒê´€ê´€ê³„ ë° ì¶”ì„¸ ë¹„êµ í•™ìŠµ
- **ì •íƒœì  ë°ì´í„°ì˜ í•´ì„ë²•**: í° ë³€í™”ê°€ ì—†ëŠ” ë°ì´í„°ì—ì„œë„ ì˜ë¯¸ë¥¼ ì°¾ëŠ” ëŠ¥ë ¥ í•¨ì–‘
- **ì§€ì†ê°€ëŠ¥ë°œì „ ëª©í‘œ ì—°ê³„ ì‚¬ê³ **: ìˆ˜ì¹˜ ì´ìƒì˜ ì‚¬íšŒì  í•¨ì˜ë¥¼ ê³ ë ¤í•œ í•´ì„ í›ˆë ¨
""")

st.markdown("### ğŸš€ í™•ì¥ í™œë™")
st.markdown("""
- **ë‹¤ë¥¸ ë‚˜ë¼ì˜ ì²­ë…„ ê³ ìš© ì§€í‘œì™€ ë¹„êµ ë¶„ì„**
- **ë‰´ìŠ¤ë‚˜ ì •ì±… ìë£Œì™€ ì—°ê²°í•œ ì‹œì‚¬ì  ë„ì¶œ í™œë™**
- **ë‚˜ì˜ ë¯¸ë˜ ì§ì—…ê³¼ ê´€ë ¨ëœ ê³ ìš©í™˜ê²½ íƒìƒ‰ ë° ë°œí‘œ**
""")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ í‘¸í„° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.info("ë°ì´í„° ì¶œì²˜: í†µê³„ì²­ ì²­ë…„ ê³ ìš© ë™í–¥(2010â€“2024) | Â©â€¯2025, êµìœ¡ìš© ì˜ˆì‹œ ìŠ¤í¬ë¦½íŠ¸")

# pages/09_09_employment_rate.py
"""
ì²­ë…„ ê³ ìš© ë™í–¥ ë¶„ì„ â€“ SDGâ€¯8 (ì–‘ì§ˆì˜ ì¼ìë¦¬ì™€ ê²½ì œ ì„±ì¥)
ì´ í˜ì´ì§€ëŠ” employmentrate.csv íŒŒì¼(2010â€‘2024)ì„ í™œìš©í•´ ìš°ë¦¬ë‚˜ë¼ ì²­ë…„ ê³ ìš© ì§€í‘œë¥¼ ì‹œê°í™”í•˜ê³ ,
í•™ìƒ í† ë¡ â€§êµìœ¡ì  í•¨ì˜â€§í™•ì¥ í™œë™ì„ ì œì‹œí•©ë‹ˆë‹¤.
"""

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë¼ì´ë¸ŒëŸ¬ë¦¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
import streamlit as st
import pandas as pd
import plotly.graph_objects as go
import os

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ í˜ì´ì§€ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.set_page_config(page_title="ğŸ‡°ğŸ‡· ì²­ë…„ ê³ ìš© ë™í–¥ ë¶„ì„", layout="wide")
st.title("ğŸ‘©â€ğŸ’¼ ìš°ë¦¬ë‚˜ë¼ ì²­ë…„ ê³ ìš© ë™í–¥ ë¶„ì„ (SDGâ€¯8)")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
def read_csv(name: str) -> pd.DataFrame:
    path = os.path.join(os.path.dirname(__file__), "..", name)
    if os.path.exists(path):
        return pd.read_csv(path, encoding="utf-8-sig")
    upl = st.file_uploader(f"â¬†ï¸ {name} ì—…ë¡œë“œ", type="csv", key=name)
    if upl is not None:
        return pd.read_csv(upl)
    st.stop()

raw = read_csv("employmentrate.csv")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë°ì´í„° ì „ì²˜ë¦¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
raw = raw.set_index("Unnamed: 0").T
raw.index.name = "ì—°ë„"
raw = raw.applymap(lambda x: float(str(x).replace(",", "")))
raw["ê³ ìš©ë¥ (%)"] = raw["ì·¨ì—…ì"] / raw["ê²½ì œí™œë™ì¸êµ¬"] * 100
raw["ì°¸ì—¬ìœ¨(%)"] = raw["ê²½ì œí™œë™ì¸êµ¬"] / raw["ìƒì‚°ê°€ëŠ¥ì¸êµ¬"] * 100
raw = raw.reset_index()
raw["ì—°ë„"] = raw["ì—°ë„"].astype(int)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì£¼ìš” ì§€í‘œ ë³µí•© ì‹œê°í™” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.markdown("### ğŸ“Š ê³ ìš©ë¥ ê³¼ ì‹¤ì—…ë¥  ì¶”ì´ ë¹„êµ")
fig_combo = go.Figure()
fig_combo.add_trace(go.Bar(x=raw["ì—°ë„"], y=raw["ê³ ìš©ë¥ (%)"], name="ê³ ìš©ë¥ (%)",
                           marker_color="skyblue"))
fig_combo.add_trace(go.Scatter(x=raw["ì—°ë„"], y=raw["ì‹¤ì—…ë¥ "], name="ì‹¤ì—…ë¥ (%)",
                               mode="lines+markers", line=dict(color="crimson", width=3)))
fig_combo.update_layout(title="ê³ ìš©ë¥ (%)ê³¼ ì‹¤ì—…ë¥ (%)ì˜ ì—°ë„ë³„ ë³€í™”",
                        xaxis_title="ì—°ë„", yaxis_title="ë¹„ìœ¨ (%)",
                        barmode="group", title_font_size=18)
st.plotly_chart(fig_combo, use_container_width=True)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë°ì´í„° ë¯¸ë¦¬ë³´ê¸° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
with st.expander("ğŸ” ì›ë³¸ ë°ì´í„° ë³´ê¸°"):
    st.dataframe(raw)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SDG ì—°ê³„ ë° ìˆ˜ì—… ìš”ì†Œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.markdown("### ğŸ’¬ í•™ìƒ í† ë¡  ì§ˆë¬¸")
st.markdown("""
1. **ì‹¤ì—…ë¥ ì´ ê°€ì¥ ë†’ì•˜ë˜ í•´**ëŠ” ì–¸ì œì´ë©°, ê·¸ í•´ì˜ ì‚¬íšŒÂ·ê²½ì œì  ìš”ì¸ì€ ë¬´ì—‡ì´ì—ˆë‚˜ìš”?  
2. **ê³ ìš©ë¥ ê³¼ ì‹¤ì—…ë¥ **ì´ ë™ì‹œì— ìƒìŠ¹í•˜ê±°ë‚˜ í•˜ë½í•œ í•´ê°€ ìˆë‹¤ë©´ ì™œ ê·¸ëŸ° í˜„ìƒì´ ë‚˜íƒ€ë‚¬ì„ê¹Œìš”?  
3. SDGs **ëª©í‘œâ€¯8** ê´€ì ì—ì„œ _"ì–‘ì§ˆì˜ ì¼ìë¦¬"_ ëŠ” ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ íŒë‹¨í•  ìˆ˜ ìˆì„ê¹Œìš”?
""")

st.markdown("### ğŸ“š êµìœ¡ì  í•¨ì˜")
st.markdown("""
- **ë³µí•©ì§€í‘œ í•´ì„ë ¥ í–¥ìƒ**: ë‘ ì§€í‘œì˜ ë™ì‹œ ì‹œê°í™”ë¥¼ í†µí•´ ë‹¤ì–‘í•œ ê²½ì œì  ì˜ë¯¸ ë„ì¶œ  
- **ì •ì±… ë¶„ì„ ì‚¬ê³ ë ¥ ê°•í™”**: ê³ ìš© ë° ì‹¤ì—…ë¥  ì¶”ì„¸ë¡œë¶€í„° ì‚¬íšŒ êµ¬ì¡°ì˜ ë³€í™” ìœ ì¶”  
- **ì§€ì†ê°€ëŠ¥ë°œì „ ëª©í‘œ ì—°ê²°**: ë°ì´í„°ë¡œ ë³´ëŠ” ê²½ì œ ì„±ì¥ê³¼ ì¼ìë¦¬ì˜ ì§ˆ ë¬¸ì œ
""")

st.markdown("### ğŸš€ í™•ì¥ í™œë™")
st.markdown("""
- **ì„±ë³„ ë˜ëŠ” ì§€ì—­ë³„ ê³ ìš© ì§€í‘œ ì¶”ê°€ ë¶„ì„**  
- **ì½”ë¡œë‚˜19 ì „í›„ ë¹„êµ ë¶„ì„**ìœ¼ë¡œ ì²­ë…„ ê³ ìš©í™˜ê²½ ë³€í™” ê³ ì°°  
- **ë¯¸ë˜ ê³ ìš© ì§€í‘œ ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„± ë° ë°œí‘œ**
""")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ í‘¸í„° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.info("ë°ì´í„° ì¶œì²˜: í†µê³„ì²­ ì²­ë…„ ê³ ìš© ë™í–¥(2010â€“2024) | Â©â€¯2025, êµìœ¡ìš© ì˜ˆì‹œ ìŠ¤í¬ë¦½íŠ¸")

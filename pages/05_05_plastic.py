import streamlit as st
import pandas as pd
import plotly.express as px
from datetime import date

st.set_page_config(page_title="í”Œë¼ìŠ¤í‹± ì‚¬ìš©ëŸ‰ ì¶”ì ê¸°", layout="wide")
st.title("ğŸ§ƒ ë‚˜ì˜ ì¼íšŒìš© í”Œë¼ìŠ¤í‹± ì‚¬ìš©ëŸ‰ ì¶”ì ê¸°")

st.markdown("""
ì´ ì•±ì€ **ë‹¹ì‹ ì˜ ì¼íšŒìš© í”Œë¼ìŠ¤í‹± ì‚¬ìš© ìŠµê´€**ì„ ì¶”ì í•˜ê³ ,  
ì „ ì„¸ê³„ í”Œë¼ìŠ¤í‹± ì†Œë¹„ ì¶”ì„¸ì™€ í•´ì–‘ ì“°ë ˆê¸° ë¬¸ì œì— ëŒ€í•´ ì¸ì‹í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.  
""")

# ğŸ¯ ì‚¬ìš©ì ì…ë ¥: ì˜¤ëŠ˜ ì‚¬ìš©í•œ ì¼íšŒìš© í”Œë¼ìŠ¤í‹±
today = date.today().strftime("%Y-%m-%d")
st.subheader("ğŸ“¥ ì˜¤ëŠ˜ ì‚¬ìš©í•œ ì¼íšŒìš© í”Œë¼ìŠ¤í‹± ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”")
cups = st.slider("í…€ë¸”ëŸ¬ ì—†ì´ ì‚¬ìš©í•œ ì¼íšŒìš© ì»µ", 0, 10, 1)
bags = st.slider("ë¹„ë‹ë´‰ì§€", 0, 10, 1)
straws = st.slider("í”Œë¼ìŠ¤í‹± ë¹¨ëŒ€", 0, 10, 1)

total_today = cups + bags + straws

st.metric(label="ì˜¤ëŠ˜ì˜ ì´ ì‚¬ìš©ëŸ‰", value=f"{total_today} ê°œ")

# ğŸŒ¿ í”¼ë“œë°±
if total_today == 0:
    st.success("ğŸŒ± ë©‹ì ¸ìš”! ì˜¤ëŠ˜ì€ í”Œë¼ìŠ¤í‹±ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì–´ìš”.")
elif total_today <= 3:
    st.info("ğŸ˜Š ì¢‹ì€ ì¶œë°œì´ì—ìš”. ë‚´ì¼ì€ ì¡°ê¸ˆ ë” ì¤„ì—¬ë³¼ê¹Œìš”?")
else:
    st.warning("ğŸ˜¢ ì˜¤ëŠ˜ í”Œë¼ìŠ¤í‹± ì‚¬ìš©ì´ ë§ì•˜ì–´ìš”. ëŒ€ì‹ í•  ìˆ˜ ìˆëŠ” ëŒ€ì•ˆì„ ìƒê°í•´ë´ìš”!")

# ğŸ“ˆ ì—°ë„ë³„ ì „ ì„¸ê³„ í”Œë¼ìŠ¤í‹± ìƒì‚°ëŸ‰ ìƒ˜í”Œ ë°ì´í„°
st.subheader("ğŸ“Š ì „ ì„¸ê³„ í”Œë¼ìŠ¤í‹± ìƒì‚°ëŸ‰ ì¶”ì´")

df = pd.DataFrame({
    "ì—°ë„": list(range(2000, 2024, 2)),
    "í”Œë¼ìŠ¤í‹± ìƒì‚°ëŸ‰ (ë°±ë§Œ í†¤)": [200, 220, 240, 270, 290, 310, 340, 370, 400, 420, 450, 475]
})

fig = px.line(df, x="ì—°ë„", y="í”Œë¼ìŠ¤í‹± ìƒì‚°ëŸ‰ (ë°±ë§Œ í†¤)", markers=True,
              title="ì „ ì„¸ê³„ í”Œë¼ìŠ¤í‹± ìƒì‚°ëŸ‰ ì¦ê°€ ì¶”ì´")
st.plotly_chart(fig, use_container_width=True)

# ğŸ¥ í•´ì–‘ ì“°ë ˆê¸° ìœ íŠœë¸Œ ì˜ìƒ
st.subheader("ğŸŒŠ í•´ì–‘ ì“°ë ˆê¸° ë¬¸ì œ, ì–¼ë§ˆë‚˜ ì‹¬ê°í• ê¹Œìš”?")
col1, col2, col3 = st.columns([1, 2, 1])  # ê°€ìš´ë° 2 ë¹„ìœ¨ë§Œ ì°¨ì§€

with col2:
    st.video("https://youtu.be/j7jCm0-7UiY?feature=shared")

# ğŸ” ì§€ì† ì‹¤ì²œ ë…ë ¤
st.markdown("""
> ğŸ’¡ ì˜¤ëŠ˜ë¶€í„° ì‘ì€ ì‹¤ì²œì´ ëª¨ì—¬ í° ë³€í™”ë¥¼ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.  
> ë‚´ì¼ì€ í…€ë¸”ëŸ¬ í•˜ë‚˜, ì—ì½”ë°± í•˜ë‚˜ ì±™ê²¨ë³´ëŠ” ê±´ ì–´ë–¨ê¹Œìš”?
""")

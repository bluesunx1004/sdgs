# climate_sealevel_dashboard.py

import streamlit as st
import pandas as pd
import plotly.express as px
from pathlib import Path

# í˜ì´ì§€ ì„¤ì •
st.set_page_config(page_title="í•´ìˆ˜ë©´ ìƒìŠ¹ ë¶„ì„ ëŒ€ì‹œë³´ë“œ", layout="wide")
st.title("ğŸŒŠ ê¸°í›„ë³€í™”ì™€ í•´ìˆ˜ë©´ ìƒìŠ¹ ë¶„ì„")

# CSV íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
csv_path = Path("/mnt/data/sealevel_data_download.csv")  # ì—…ë¡œë“œí•œ íŒŒì¼ ê²½ë¡œ
df = pd.read_csv(csv_path)

# ë°ì´í„° ì „ì²˜ë¦¬ (ì˜ˆ: ì»¬ëŸ¼ í™•ì¸)
st.markdown("#### ë°ì´í„° ë¯¸ë¦¬ë³´ê¸°")
st.dataframe(df.head())

# ë…„ë„ë³„ í•´ìˆ˜ë©´ ìƒìŠ¹ ì‹œê°í™”
st.markdown("### ğŸ“ˆ ì—°ë„ë³„ í•´ìˆ˜ë©´ ìƒìŠ¹ ì¶”ì„¸")
fig = px.line(df, x="Year", y="GMSL", title="ì „ì§€êµ¬ í‰ê·  í•´ìˆ˜ë©´(GMSL) ë³€í™” ì¶”ì´", labels={"GMSL": "í•´ìˆ˜ë©´(mm)"})
fig.update_layout(title_font_size=18)
st.plotly_chart(fig, use_container_width=True)

# íŠ¹ì • ê¸°ê°„ í•„í„°ë§
st.markdown("### ğŸ” íŠ¹ì • ê¸°ê°„ í•„í„°")
start_year, end_year = st.slider("ì—°ë„ ë²”ìœ„ ì„ íƒ", int(df["Year"].min()), int(df["Year"].max()), (1993, 2023))
filtered = df[(df["Year"] >= start_year) & (df["Year"] <= end_year)]

fig2 = px.line(filtered, x="Year", y="GMSL", title=f"{start_year} ~ {end_year} í•´ìˆ˜ë©´ ë³€í™”")
st.plotly_chart(fig2, use_container_width=True)

# í†µê³„ ì§€í‘œ ì¶œë ¥
st.markdown("### ğŸ“Š í†µê³„ ì •ë³´")
st.metric("ğŸ“ í‰ê·  í•´ìˆ˜ë©´(mm)", round(filtered["GMSL"].mean(), 2))
st.metric("ğŸ“ˆ ìµœëŒ€ê°’", round(filtered["GMSL"].max(), 2))
st.metric("ğŸ“‰ ìµœì†Œê°’", round(filtered["GMSL"].min(), 2))

# ğŸŒ± SDGs ì—°ê³„ ì‹œê°í™” ì•ˆë‚´
st.markdown("### ğŸŒ± SDGsì™€ì˜ ì—°ê³„")
st.markdown("""
- **SDG 13 (ê¸°í›„ í–‰ë™)**: í•´ìˆ˜ë©´ ìƒìŠ¹ì€ ê¸°í›„ ë³€í™”ì˜ ì§ì ‘ì ì¸ ê²°ê³¼ì…ë‹ˆë‹¤. íƒ„ì†Œ ë°°ì¶œ ì €ê°ì˜ í•„ìš”ì„±ì„ ê°•ì¡°í•©ë‹ˆë‹¤.  
- **SDG 14 (í•´ì–‘ ìƒíƒœê³„ ë³´í˜¸)**: í•´ì–‘ ìƒíƒœê³„ì™€ í•´ì•ˆ ì§€ì—­ ì»¤ë®¤ë‹ˆí‹°ì— ì§ì ‘ì ì¸ ì˜í–¥ì„ ì¤ë‹ˆë‹¤.
""")

# ğŸ’¬ í•™ìƒ í† ë¡  ì§ˆë¬¸
st.markdown("### ğŸ’¬ í•™ìƒ í† ë¡  ì§ˆë¬¸")
st.markdown("""
- í•´ìˆ˜ë©´ ìƒìŠ¹ì€ ì–´ë–¤ êµ­ê°€ë‚˜ ì§€ì—­ì— ë” í° ì˜í–¥ì„ ì¤„ê¹Œìš”?
- ì´ëŸ¬í•œ ë³€í™”ê°€ í•´ì–‘ ìƒíƒœê³„ì— ì–´ë–¤ ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆì„ê¹Œìš”?
- ê¸°í›„ ë³€í™”ì— ëŒ€ì‘í•˜ê¸° ìœ„í•œ êµ­ì œì  í˜‘ë ¥ ë°©ì•ˆì€ ë¬´ì—‡ì´ ìˆì„ê¹Œìš”?
""")

# ğŸ“š êµìœ¡ì  í•¨ì˜
st.markdown("### ğŸ“š êµìœ¡ì  í•¨ì˜")
st.markdown("""
- ì‹¤ì œ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê³¼í•™ì  ì‚¬ì‹¤ì„ íŒŒì•…í•˜ê³  ë¹„íŒì  ì‚¬ê³  ëŠ¥ë ¥ì„ ê¸°ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
- ê¸°í›„ë³€í™”ì™€ ì§€ì†ê°€ëŠ¥ì„±ì˜ ìƒê´€ê´€ê³„ë¥¼ ì´í•´í•˜ê³  SDGs ëª©í‘œì™€ ì‹¤ìƒí™œ ì—°ê²°ì„ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
- ë°ì´í„° ë¦¬í„°ëŸ¬ì‹œ, ì‹œê°í™”, í™˜ê²½ ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì„ ì¢…í•©ì ìœ¼ë¡œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
""")

# ğŸ” í™•ì¥ í™œë™
st.markdown("### ğŸ” í™•ì¥ í™œë™")
st.markdown("""
- ì§€ì—­ë³„ í•´ìˆ˜ë©´ ë³€í™” ìë£Œë¥¼ ì¶”ê°€ë¡œ ì¡°ì‚¬í•˜ì—¬ ë¹„êµ ë¶„ì„  
- ê¸°í›„ í–‰ë™ ìº í˜ì¸ ê¸°íš ë° ì‹¤ì²œ ë°©ì•ˆ ì œì‹œ  
- ë°ì´í„° ê¸°ë°˜ì˜ ë‰´ìŠ¤ ì•„í‹°í´ ë˜ëŠ” ì¸í¬ê·¸ë˜í”½ ì œì‘
""")
